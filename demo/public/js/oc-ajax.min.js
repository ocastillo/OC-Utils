/*!
OC-Utils 0.1.0
http://www.orlandocastillo.com
(c) 2014 Orlando Castillo
This may be freely distributed under the MIT license.
*/
var oc=oc||{};oc.Ajax=function(){"use strict";function a(a){var b=a.getResponseHeader("content-type");return b.match("application/json")?JSON.parse(a.responseText):b.match("text/xml")?a.responseXML:a.responseText}return function(b){if("object"!=typeof b)throw new Error("Expecting object as a parameter");if(!b.url||b.url&&"string"!=typeof b.url)throw new Error("url is required parameter (string)");if(b.data&&"object"!=typeof b.data)throw new Error("Expecting object for data parameter");var c,d="",e=b.type||"GET",f=b.url,g=b.async||!0,h=b.success||!1,i=b.error||!1,j=b.loading||!1,k=b.data||{},l="undefined"==typeof b.cache?!0:b.cache;if(window.XMLHttpRequest)c=new XMLHttpRequest;else if(window.ActiveXObject)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(m){}}if(!c)throw new Error("Unable to create an XMLHTTP instance");c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){var b=a(c);h&&h(b,c.statusText,c)}else i&&i(c,c.status,c.statusText);else 3===c.readyState&&j&&j()},l||(k._=(new Date).getTime());for(var n in k)""!==d&&(d+="&"),d+=n+"="+encodeURIComponent(k[n]);if("GET"===e&&d.length){var o=f.match(/\?/)?"&":"?";f+=o+d}c.open(e,f,g),"POST"===e&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(d)}}();